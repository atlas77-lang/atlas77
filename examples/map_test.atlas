import "std/io";
import "std/map";

fun main() {
    // Testing maps
    let map = new Map<int64, string>();
    map.insert(1, "one");
    let val1 = map.get(1);
    print("Key 1 maps to value: ");
    if val1.has_value() {
        println(*(val1.value()));
    } else {
        println("None");
    }
    map.insert(2, "two");
    map.insert(3, "three");

    println("Before into_iter");
    let map_iter: Iter<Pair<int64, string>> = map.into_iter();
    println("After into_iter");
    
    while map_iter.has_next() {
        println("Calling next");
        let pair_opt: optional<Pair<int64, string>> = map_iter.next();
        println("After next");
        if pair_opt.has_value() {
            println("Has value");
            println((&pair_opt));
            let pair = pair_opt.value();
            println(&pair);
            print("Key: ");
            print(pair.get_first());
            print(", Value: ");
            println(pair.get_second());
        }        
    }
    println("Done");

}